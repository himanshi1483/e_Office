@model e_Office.Models.UpcomingEventsViewModel
@using CalendarData = Google.Apis.Calendar.v3.Data;

@{
    ViewBag.Title = "Upcoming Events";
}
@helper FormatEventTime(CalendarData.EventDateTime when)
{
    // Either Date or DateTime is set, depending on whether or not the event is
    // an all-day event.
    if (when.DateTime == null)
    {
        <text>All day</text>
    }
    else
    {
        @:@when.DateTime.Value.ToShortTimeString()
    }
}
@helper FormatEventLength(CalendarData.EventDateTime start, CalendarData.EventDateTime end)
{
    var duration = end.DateTime - start.DateTime;
    if (duration == null)
    {
        <text>All day</text>
    }
    else
    {
        @:@string.Format(
  "{0} hour{1} {2} minute{3}",
  (int)duration.Value.TotalHours,
  duration.Value.TotalHours >= 2 ? "s" : "",
  (int)duration.Value.Minutes,
  duration.Value.Minutes >= 2 ? "s" : "")
    }
}

<div class="card">
    <div class="card-header">
        <h5 class="card-title m-b-0 text-center">Event Calendar</h5>
    </div>
    <div class="">
        <div class="row">
            <div class="col-lg-3 border-right p-r-0">
                <div class="card-body border-bottom">
                    <h4 class="card-title m-t-10">Add New Event</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <a href="javascript:void(0)" data-toggle="modal" data-target="#add-new-event" class="btn m-t-20 btn-info btn-block waves-effect waves-light">
                                <i class="ti-plus"></i> Add New Event
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="card-body b-l calender-sidebar">
                    <iframe src="https://calendar.google.com/calendar/b/6/embed?height=700&amp;wkst=2&amp;bgcolor=%236ca6cf&amp;ctz=Asia%2FKolkata&amp;src=c3VwcG9ydEBhYXJ1c2hzeXN0ZW1zLmNvbQ&amp;src=ZW4uaW5kaWFuI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&amp;color=%23039BE5&amp;color=%230B8043&amp;showTitle=0" style="border-width:0" width="900" height="700" frameborder="0" scrolling="no"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade none-border" id="add-new-event">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><strong>Add</strong> a category</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="control-label">Category Name</label>
                            <input class="form-control form-white" placeholder="Enter name" type="text" name="category-name" />
                        </div>
                        <div class="col-md-6">
                            <label class="control-label">Choose Category Color</label>
                            <select class="form-control form-white" data-placeholder="Choose a color..." name="category-color">
                                <option value="success">Success</option>
                                <option value="danger">Danger</option>
                                <option value="info">Info</option>
                                <option value="primary">Primary</option>
                                <option value="warning">Warning</option>
                                <option value="inverse">Inverse</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect waves-light save-category" data-dismiss="modal">Save</button>
                <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@*<div class="row text-center">
    <div class="col-md-2">
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title m-b-0">Event Calendar</h5>
            </div>
            <div class="card-body">
                <iframe src="https://calendar.google.com/calendar/b/6/embed?height=700&amp;wkst=2&amp;bgcolor=%236ca6cf&amp;ctz=Asia%2FKolkata&amp;src=c3VwcG9ydEBhYXJ1c2hzeXN0ZW1zLmNvbQ&amp;src=ZW4uaW5kaWFuI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&amp;color=%23039BE5&amp;color=%230B8043&amp;showTitle=0" style="border-width:0" width="900" height="700" frameborder="0" scrolling="no"></iframe>*@
@*<table class="table">
        <thead>
            <tr>
                <th>Time</th>
                <th>Length</th>
                <th>Summary</th>
            </tr>
        </thead>

        @foreach (var group in Model.EventGroups)
        {
            <tbody>
                <tr><th colspan="4">@group.GroupTitle</th></tr>
                @foreach (var item in group.Events)
                {
                    <tr>
                        <td>@FormatEventTime(item.Start)</td>
                        <td>@FormatEventLength(item.Start, item.End)</td>
                        <td>@item.Summary</td>
                    </tr>
                }
            </tbody>
        }

    </table>*@
@*</div>
            </div>
        </div>
        <div class="col-md-2">
        </div>
    </div>*@

